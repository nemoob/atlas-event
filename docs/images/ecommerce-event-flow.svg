<svg width="800" height="500" xmlns="http://www.w3.org/2000/svg">
  <!-- 背景 -->
  <rect width="800" height="500" fill="#f8f9fa" rx="10" ry="10"/>
  
  <!-- 标题 -->
  <text x="400" y="40" font-family="Arial" font-size="24" text-anchor="middle" font-weight="bold">电子商务系统事件流</text>
  
  <!-- 服务图标 -->
  <!-- 订单服务 -->
  <rect x="100" y="100" width="120" height="60" fill="#4285f4" rx="10" ry="10" opacity="0.8"/>
  <text x="160" y="135" font-family="Arial" font-size="14" fill="white" text-anchor="middle">订单服务</text>
  
  <!-- 库存服务 -->
  <rect x="340" y="100" width="120" height="60" fill="#34a853" rx="10" ry="10" opacity="0.8"/>
  <text x="400" y="135" font-family="Arial" font-size="14" fill="white" text-anchor="middle">库存服务</text>
  
  <!-- 支付服务 -->
  <rect x="580" y="100" width="120" height="60" fill="#ea4335" rx="10" ry="10" opacity="0.8"/>
  <text x="640" y="135" font-family="Arial" font-size="14" fill="white" text-anchor="middle">支付服务</text>
  
  <!-- 物流服务 -->
  <rect x="340" y="300" width="120" height="60" fill="#fbbc05" rx="10" ry="10" opacity="0.8"/>
  <text x="400" y="335" font-family="Arial" font-size="14" fill="white" text-anchor="middle">物流服务</text>
  
  <!-- 事件总线 -->
  <rect x="100" y="200" width="600" height="40" fill="#673ab7" rx="5" ry="5" opacity="0.8"/>
  <text x="400" y="225" font-family="Arial" font-size="16" fill="white" text-anchor="middle">事件总线 (Event Bus)</text>
  
  <!-- 事件流 -->
  <!-- 订单创建事件 -->
  <line x1="160" y1="160" x2="160" y2="200" stroke="#4285f4" stroke-width="2"/>
  <polygon points="155,195 165,195 160,200" fill="#4285f4"/>
  
  <circle cx="160" y="180" r="15" fill="#4285f4" opacity="0.8"/>
  <text x="160" y="185" font-family="Arial" font-size="10" fill="white" text-anchor="middle">1</text>
  
  <!-- 库存服务订阅 -->
  <line x1="160" y1="200" x2="160" y2="240" stroke="#4285f4" stroke-width="2"/>
  <line x1="160" y1="240" x2="400" y2="240" stroke="#4285f4" stroke-width="2"/>
  <line x1="400" y1="240" x2="400" y2="160" stroke="#4285f4" stroke-width="2"/>
  <polygon points="395,165 405,165 400,160" fill="#4285f4"/>
  
  <circle cx="280" y="240" r="15" fill="#4285f4" opacity="0.8"/>
  <text x="280" y="245" font-family="Arial" font-size="10" fill="white" text-anchor="middle">2</text>
  
  <!-- 支付服务订阅 -->
  <line x1="160" y1="200" x2="160" y2="250" stroke="#4285f4" stroke-width="2"/>
  <line x1="160" y1="250" x2="640" y2="250" stroke="#4285f4" stroke-width="2"/>
  <line x1="640" y1="250" x2="640" y2="160" stroke="#4285f4" stroke-width="2"/>
  <polygon points="635,165 645,165 640,160" fill="#4285f4"/>
  
  <circle cx="400" y="250" r="15" fill="#4285f4" opacity="0.8"/>
  <text x="400" y="255" font-family="Arial" font-size="10" fill="white" text-anchor="middle">2</text>
  
  <!-- 支付完成事件 -->
  <line x1="640" y1="160" x2="640" y2="200" stroke="#ea4335" stroke-width="2"/>
  <polygon points="635,195 645,195 640,200" fill="#ea4335"/>
  
  <circle cx="640" y="180" r="15" fill="#ea4335" opacity="0.8"/>
  <text x="640" y="185" font-family="Arial" font-size="10" fill="white" text-anchor="middle">3</text>
  
  <!-- 物流服务订阅 -->
  <line x1="640" y1="200" x2="640" y2="260" stroke="#ea4335" stroke-width="2"/>
  <line x1="640" y1="260" x2="400" y2="260" stroke="#ea4335" stroke-width="2"/>
  <line x1="400" y1="260" x2="400" y2="300" stroke="#ea4335" stroke-width="2"/>
  <polygon points="395,295 405,295 400,300" fill="#ea4335"/>
  
  <circle cx="520" y="260" r="15" fill="#ea4335" opacity="0.8"/>
  <text x="520" y="265" font-family="Arial" font-size="10" fill="white" text-anchor="middle">4</text>
  
  <!-- 事件说明 -->
  <rect x="100" y="400" width="600" height="80" fill="white" stroke="#333" stroke-width="1" rx="5" ry="5"/>
  
  <circle cx="120" y="420" r="15" fill="#4285f4" opacity="0.8"/>
  <text x="120" y="425" font-family="Arial" font-size="10" fill="white" text-anchor="middle">1</text>
  <text x="145" y="425" font-family="Arial" font-size="14" text-anchor="start">OrderCreatedEvent - 用户下单，订单服务创建订单并发布事件</text>
  
  <circle cx="120" y="450" r="15" fill="#4285f4" opacity="0.8"/>
  <text x="120" y="455" font-family="Arial" font-size="10" fill="white" text-anchor="middle">2</text>
  <text x="145" y="455" font-family="Arial" font-size="14" text-anchor="start">库存服务和支付服务订阅OrderCreatedEvent并处理</text>
  
  <circle cx="120" y="480" r="15" fill="#ea4335" opacity="0.8"/>
  <text x="120" y="485" font-family="Arial" font-size="10" fill="white" text-anchor="middle">3</text>
  <text x="145" y="485" font-family="Arial" font-size="14" text-anchor="start">PaymentCompletedEvent - 支付完成后，支付服务发布事件</text>
  
  <circle cx="400" y="480" r="15" fill="#ea4335" opacity="0.8"/>
  <text x="400" y="485" font-family="Arial" font-size="10" fill="white" text-anchor="middle">4</text>
  <text x="425" y="485" font-family="Arial" font-size="14" text-anchor="start">物流服务订阅PaymentCompletedEvent并安排发货</text>
  
  <!-- 箭头说明 -->
  <line x1="50" y1="370" x2="70" y2="370" stroke="#4285f4" stroke-width="2"/>
  <polygon points="65,365 75,370 65,375" fill="#4285f4"/>
  <text x="85" y="375" font-family="Arial" font-size="12" text-anchor="start">OrderCreatedEvent 流</text>
  
  <line x1="250" y1="370" x2="270" y2="370" stroke="#ea4335" stroke-width="2"/>
  <polygon points="265,365 275,370 265,375" fill="#ea4335"/>
  <text x="285" y="375" font-family="Arial" font-size="12" text-anchor="start">PaymentCompletedEvent 流</text>
</svg>
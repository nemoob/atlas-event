<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <!-- 背景 -->
  <rect width="800" height="600" fill="#f8f9fa" rx="10" ry="10"/>
  
  <!-- 标题 -->
  <text x="400" y="40" font-family="Arial" font-size="24" text-anchor="middle" font-weight="bold">注解处理流程</text>
  
  <!-- 组件 -->
  <!-- 客户端代码 -->
  <rect x="100" y="100" width="150" height="60" fill="#4285f4" rx="10" ry="10" opacity="0.8"/>
  <text x="175" y="135" font-family="Arial" font-size="16" fill="white" text-anchor="middle">客户端代码</text>
  
  <!-- 事件总线 -->
  <rect x="325" y="100" width="150" height="60" fill="#ea4335" rx="10" ry="10" opacity="0.8"/>
  <text x="400" y="135" font-family="Arial" font-size="16" fill="white" text-anchor="middle">事件总线</text>
  
  <!-- 注解处理器 -->
  <rect x="550" y="100" width="150" height="60" fill="#fbbc05" rx="10" ry="10" opacity="0.8"/>
  <text x="625" y="135" font-family="Arial" font-size="16" fill="white" text-anchor="middle">注解处理器</text>
  
  <!-- 带注解的类 -->
  <rect x="100" y="250" width="150" height="60" fill="#34a853" rx="10" ry="10" opacity="0.8"/>
  <text x="175" y="285" font-family="Arial" font-size="16" fill="white" text-anchor="middle">带注解的类</text>
  
  <!-- 反射API -->
  <rect x="550" y="250" width="150" height="60" fill="#673ab7" rx="10" ry="10" opacity="0.8"/>
  <text x="625" y="285" font-family="Arial" font-size="16" fill="white" text-anchor="middle">反射API</text>
  
  <!-- 监听器注册表 -->
  <rect x="325" y="400" width="150" height="60" fill="#ff6d01" rx="10" ry="10" opacity="0.8"/>
  <text x="400" y="435" font-family="Arial" font-size="16" fill="white" text-anchor="middle">监听器注册表</text>
  
  <!-- 流程步骤 -->
  <!-- 步骤1：调用scanAndRegister方法 -->
  <line x1="250" y1="130" x2="325" y2="130" stroke="#333" stroke-width="2"/>
  <polygon points="320,125 330,135 325,130" fill="#333"/>
  <circle cx="290" y="130" r="15" fill="#4285f4" opacity="0.8"/>
  <text x="290" y="135" font-family="Arial" font-size="12" fill="white" text-anchor="middle">1</text>
  <text x="290" y="110" font-family="Arial" font-size="12" text-anchor="middle">scanAndRegister(listener)</text>
  
  <!-- 步骤2：调用注解处理器 -->
  <line x1="475" y1="130" x2="550" y2="130" stroke="#333" stroke-width="2"/>
  <polygon points="545,125 555,135 550,130" fill="#333"/>
  <circle cx="510" y="130" r="15" fill="#ea4335" opacity="0.8"/>
  <text x="510" y="135" font-family="Arial" font-size="12" fill="white" text-anchor="middle">2</text>
  <text x="510" y="110" font-family="Arial" font-size="12" text-anchor="middle">processAnnotations(listener)</text>
  
  <!-- 步骤3：获取带注解的类 -->
  <line x1="550" y1="160" x2="250" y2="250" stroke="#333" stroke-width="2"/>
  <polygon points="255,245 245,255 250,250" fill="#333"/>
  <circle cx="400" y="205" r="15" fill="#fbbc05" opacity="0.8"/>
  <text x="400" y="210" font-family="Arial" font-size="12" fill="white" text-anchor="middle">3</text>
  <text x="400" y="185" font-family="Arial" font-size="12" text-anchor="middle">获取监听器类</text>
  
  <!-- 步骤4：使用反射API扫描方法 -->
  <line x1="250" y1="280" x2="550" y2="280" stroke="#333" stroke-width="2"/>
  <polygon points="545,275 555,285 550,280" fill="#333"/>
  <circle cx="400" y="280" r="15" fill="#fbbc05" opacity="0.8"/>
  <text x="400" y="285" font-family="Arial" font-size="12" fill="white" text-anchor="middle">4</text>
  <text x="400" y="260" font-family="Arial" font-size="12" text-anchor="middle">扫描带有@EventSubscribe注解的方法</text>
  
  <!-- 步骤5：返回方法列表 -->
  <line x1="550" y1="310" x2="250" y2="310" stroke="#333" stroke-width="2" stroke-dasharray="5,5"/>
  <polygon points="255,305 245,315 250,310" fill="#333"/>
  <circle cx="400" y="310" r="15" fill="#673ab7" opacity="0.8"/>
  <text x="400" y="315" font-family="Arial" font-size="12" fill="white" text-anchor="middle">5</text>
  <text x="400" y="330" font-family="Arial" font-size="12" text-anchor="middle">返回带注解的方法列表</text>
  
  <!-- 步骤6：为每个方法创建监听器 -->
  <line x1="175" y1="310" x2="175" y2="350" stroke="#333" stroke-width="2"/>
  <circle cx="175" y="330" r="15" fill="#fbbc05" opacity="0.8"/>
  <text x="175" y="335" font-family="Arial" font-size="12" fill="white" text-anchor="middle">6</text>
  <text x="250" y="330" font-family="Arial" font-size="12" text-anchor="middle">为每个方法创建EventListener</text>
  
  <!-- 步骤7：注册监听器到事件总线 -->
  <line x1="175" y1="350" x2="325" y2="400" stroke="#333" stroke-width="2"/>
  <polygon points="320,395 330,405 325,400" fill="#333"/>
  <circle cx="250" y="375" r="15" fill="#fbbc05" opacity="0.8"/>
  <text x="250" y="380" font-family="Arial" font-size="12" fill="white" text-anchor="middle">7</text>
  <text x="250" y="355" font-family="Arial" font-size="12" text-anchor="middle">注册监听器</text>
  
  <!-- 步骤8：存储到监听器注册表 -->
  <line x1="400" y1="160" x2="400" y2="400" stroke="#333" stroke-width="2" stroke-dasharray="5,5"/>
  <polygon points="395,395 405,395 400,400" fill="#333"/>
  <circle cx="400" y="350" r="15" fill="#ea4335" opacity="0.8"/>
  <text x="400" y="355" font-family="Arial" font-size="12" fill="white" text-anchor="middle">8</text>
  <text x="475" y="350" font-family="Arial" font-size="12" text-anchor="middle">存储到监听器注册表</text>
  
  <!-- 步骤9：处理完成，返回 -->
  <line x1="550" y1="160" x2="475" y2="160" stroke="#333" stroke-width="2" stroke-dasharray="5,5"/>
  <polygon points="480,155 470,165 475,160" fill="#333"/>
  <circle cx="510" y="160" r="15" fill="#fbbc05" opacity="0.8"/>
  <text x="510" y="165" font-family="Arial" font-size="12" fill="white" text-anchor="middle">9</text>
  <text x="510" y="180" font-family="Arial" font-size="12" text-anchor="middle">处理完成</text>
  
  <!-- 步骤10：返回客户端 -->
  <line x1="325" y1="160" x2="250" y2="160" stroke="#333" stroke-width="2" stroke-dasharray="5,5"/>
  <polygon points="255,155 245,165 250,160" fill="#333"/>
  <circle cx="290" y="160" r="15" fill="#ea4335" opacity="0.8"/>
  <text x="290" y="165" font-family="Arial" font-size="12" fill="white" text-anchor="middle">10</text>
  <text x="290" y="180" font-family="Arial" font-size="12" text-anchor="middle">返回客户端</text>
  
  <!-- 注解方法示例 -->
  <rect x="100" y="480" width="600" height="80" fill="#f1f3f4" rx="5" ry="5" stroke="#dadce0" stroke-width="1"/>
  <text x="120" y="500" font-family="Consolas, monospace" font-size="14">@EventSubscribe(eventType = "ORDER_CREATED")</text>
  <text x="120" y="520" font-family="Consolas, monospace" font-size="14">public void handleOrderCreated(OrderCreatedEvent event) {</text>
  <text x="140" y="540" font-family="Consolas, monospace" font-size="14">// 处理订单创建事件...</text>
  <text x="120" y="560" font-family="Consolas, monospace" font-size="14">}</text>
  
  <!-- 底部说明 -->
  <text x="400" y="580" font-family="Arial" font-size="14" text-anchor="middle" font-style="italic">实线表示请求流，虚线表示响应流</text>
</svg>